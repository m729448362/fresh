<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta name="renderer" content="webkit">
<title></title>
<link rel="stylesheet" href="css/pintuer.css">
<link rel="stylesheet" href="css/admin.css">
<script src="js/jquery.js"></script>
<script src="js/pintuer.js"></script>
<script src="js/JquerySession.js"></script>
<script>
var pages=0;
var goodsType;
	$(document).ready(function(c) {
	
		$.ajax({//查询所有商品种类
	             url: "/fresh/goods_type/showAllType.action",        //后台url
	             data: {                          //数据
	             },
	             type: "POST",                   //类型，POST或者GET
	             dataType: 'json',              //数据返回类型，可以是xml、json等
	             success: function (data) {      //成功，回调函数    画页面
	                 	alert(data.result);
	                 	data=data.list;
	                 	$("#goodsType").remove();//移除
	                 	$("#title").append("<ul id='goodsType'></ul>");
	                  for(var i=0;i<data.length;i++){//data.length是获取data的长度。for循环
                         $("#goodsType").append("<li style='float:left;padding:0.2em;'><a href='javascript:void(0)' onclick='javascript:getGoods("+data[i].id+")'>"+data[i].goods_type_name+"</a></li>");
                         //如果添加class或者id内容要加单引号例如：$("#first").append("<li class='a'>"+data[i].name+"</li>");
                     }
	                // $("#goodsType").append("<li style='float:left;padding:0.2em;'><a onclick='javascript:getGoods(other)'>其他</a></li>");
	                 getGoods("1");//查询所有种类商品
	             },
	             error: function (er) {          //失败，回调函数
	                 alert(er);
	             }
	         });
	});
	function getGoods(obj){
		page=0;
		goodsType=obj;
		getGoodsByType(goodsType);
	}
	function getGoodsByType(goodsType){//根据种类查询商品
		pages+=1;
	   $.ajax({
             url: "/fresh/goods/getGoodsByType.action",        //后台url
             data: {                          //数据
                 goods_type:goodsType,
                 currentPage:pages
             },
             type: "POST",                   //类型，POST或者GET
             dataType: 'json',              //数据返回类型，可以是xml、json等
             success: function (data) {      //成功，回调函数    画页面
                 	//alert(data.result);
                 	data=data.list1;
                 	$("#goods").remove();//移除
                 	$("#goodsType").append("<table class='table table-hover text-center' id='goods'></table>");
                  for(var i=0;i<data.length;i++){//data.length是获取data的长度。for循环
                        $("#goods").append("<tr><td rowspan='2'><img src="+data[i].goods_img+"></td><td colspan='2'>"+data[i].nagoods_nameme+"</td><td><input type='button' value='下架菜品' onclick='deleteGoods("+data[i].id+")'/></td></tr><tr><td><input type='button' value='基地严选'/></td><td>"+data[i].goods_low_price+"~"+data[i].goods_high_price+"</td><td><input type='button' value='编辑菜品'+onclick='editGoods("+data[i].goodsId+")'></input></td></tr>");
                    	$("#findMore").html("<a href=\"javaScript:findMoreGoods()\">查看更多</a>");
                    }
             },
             error: function (er) {          //失败，回调函数
                 alert(er);
             }
         });
	}
	function editGoodsType(){//编辑菜品种类
		window.location.href="./editGoodsType.html"; 	
	}
	function editGoods(goodsId){//编辑菜品
		sessionStorage.setItem("goodsId",goodsId);
		window.location.href="./editGoods.html";
	}
	function addGoods(){//添加菜品
		window.location.href="./editGoods.html";
	}
	function deleteGoods(goodsId){//下架菜品
		$.ajax({//删除商品种类
	             url: "/fresh/goods/delGoods.action",        //后台url
	             data: {                          //数据
	                 goodsId:goodsId
	             },
	             type: "POST",                   //类型，POST或者GET
	             dataType: 'json',              //数据返回类型，可以是xml、json等
	             success: function (data) {      //成功，回调函数    画页面
	                 	window.location.reload();
	             },
	             error: function (er) {          //失败，回调函数
	                 alert(er);
	             }
	         });
	}
</script>
</head>
<body>
<form method="post" action="" id="listform">
  <div class="panel admin-panel">
  	<header class="panel-head" ><strong> 菜品中心</strong></header> 
  	<table id="title">
  		<tr><td>
  			<div class="title">
		    	<ul >
			    	<li style="float:left;padding:0.2em;"><a href="./index.html">返回首页</a></li>
		    	</ul>
		    </div>
  		</td></th>
  	</table>
  	<div style="float:right;" ><input type="button" onclick="editGoodsType()" value="编辑菜品种类"/></div>
	<div>
	   	<ul id="goodsType">
	   		<li style="float:left;padding:0.2em;"><a onclick="javascript:getGoods()">全部</a></li>
	   		<li style="float:left;padding:0.2em;"><a>叶菜类</a></li>
	   		<li style="float:left;padding:0.2em;"><a>根茎类</a></li>
	   		<li style="float:left;padding:0.2em;"><a>瓜果类</a></li>
	   		<li style="float:left;padding:0.2em;"><a>豆类</a></li>
	   		<li style="float:left;padding:0.2em;"><a>其他</a></li>
	   	</ul>
	</div>   
	<div style="float:right;"><input type="button" onclick="addGoods()" value="添加菜品"/></div>
    <table class="table table-hover text-center" id="goods">
      <tr>
        <td rowspan="2"><img src="./images/vegetable1.jpg"></td>
        <td colspan="2"><a href="javascript:openPage()">蔬菜名称</a></td>
        <td><input type="button" value="下架菜品" onclick="deleteGoods('goodsId')"/> </td>
      </tr>
     <!--  <volist name="list" id="vo"> -->
        <tr>
          <td rolspan="2"><input type="button" value="基地严选"/></td>
          <td rolspan="2">蔬菜价格</td>
          <td><input type="button" value="编辑菜品" onclick="editGoods(’goodsId‘)"/></td>
        </tr>
        
    </table>
  </div>
</form>
<div class="footer" id="findMore">
</div>
<script type="text/javascript">


</script>
</body>
</html>